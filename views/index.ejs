<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cooookieee</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous" />
</head>

<body style="background-color: <%= locals.user ? locals.user.color : null %>;">

  <h1 class="text-center m-5">Session y Cookies</h1>

  <% if (locals.user && locals.user.nombre && bandera) { %>
    <div class="card col-8 mx-auto text-center">
        <div class="card-header">Bienvenid@</div>
        <div class="card-body">
          <form action="" method="get">
            <h5 class="card-title">Hola <%= locals.user.nombre %></h5>
            <p class="card-text">elegiste el color: <% if(locals.user.color === "yellow"){ %>
                Amarillo
              <% } else { %>
                <% if(locals.user.color === "green"){ %>
                 Verde
                 <% } else { %>
                    <% if(locals.user.color === "red"){ %>
                       Rojo
                   <% } else { %>
                    <% if(locals.user.color === "blue"){ %>
                      Azul
                    <% } %>
             <% }}} %></p>
            <p class="card-text">tu email es: <%= locals.user.email %></p>
            <p class="card-text">y tu edad es: <%= locals.user.edad %></p>
            <a href="./mensaje" class="btn btn-info" >mensaje</a>
          </form>
        </div>
    </div>
  <% }else{ %>
  <form action="" class="container col-md-4" method="POST">
    <div class="mb-3">
      <label for="nombre" class="form-label">Ingrese su nombre</label>
      <input type="text" class="form-control <%= locals.errors && errors.nombre ? 'is-invalid' : null %>" id="nombre"
        name="nombre" value="<%= locals.old && old.nombre ? old.nombre : null %> " />
      <small class="text-danger">
        <%= locals.errors && errors.nombre ? errors.nombre.msg : null %>
      </small>
    </div>
    <div class="mb-3">
      <label for="color" class="form-label">Selecione un color</label>
      <select name="color" id="">
        <option value="" selected hidden>Seleccione...</option>
        <option value="red">Rojo</option>
        <option value="blue">Azul</option>
        <option value="yellow">Amarillo</option>
        <option value="green">Verde</option>
      </select>
      <small class="text-danger"><%= locals.errors && errors.color ? errors.color.msg : null %></small>
    </div>
    <div class="mb-3">
      <label for="email" class="form-label">Ingrese su email</label>
      <input type="email" class="form-control <%= locals.errors && errors.email ? 'is-invalid' : null %>" id="email"
        name="email" value="<%= locals.old && old.nombre ? old.email : null %> " />
      <small class="text-danger">
        <%= locals.errors && errors.email ? errors.email.msg : null %>
      </small>
    </div>
    <div class="mb-3">
      <label for="edad" class="form-label">Ingrese su edad</label>
      <input type="text" class="form-control <%= locals.errors && errors.edad ? 'is-invalid' : null %>" name="edad"
        id="edad" value="<%= locals.old && old.nombre ? old.edad : null %>"/>
      <small class="text-danger"><%= locals.errors && errors.edad ? errors.edad.msg : null %></small>
    </div>
    <div class="mb-3">
     <input type="checkbox" name="recordar" id="">
     <label for="recordar" class="form-label">Recordar color</label>
    </div>
    <button type="submit" class="btn btn-primary">Enviar</button>
  </form>
  <form action="/reset" class="container col-md-4 d-flex flex-row-reverse"><button type="submit" class="btn btn-primary">Olvidar Color</button></form>
  <% } %>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous">
  </script>
</body>

</html>